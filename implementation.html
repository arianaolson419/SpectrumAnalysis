<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>SpectrumAnalysis</title>


    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>

        <h1><a href='index.html' class="home">SpectrumAnalysis</a></h1>

        <p>Final SoftDes Project</p>

        <p class="view"><a href="https://github.com/arianaolson419/SpectrumAnalysis">View the Project on GitHub <small>arianaolson419/SpectrumAnalysis</small></a></p>

        <p class="view"><a href="index.html">About</a></p>
          <ul class="sublinks" style='text-align: left'>
            <li class='sublinks'>
            <a href="fft_info.html">What is FFT?</a>
            </li>
            <li class='sublinks'>
            <a href="our_story.html">Our Story</a>
            </li>
          </ul>

        <p class="view" style="padding-top: 20px"><a href="implementation.html">Implementation</a></p>

        <p class="view"><a href="README.html">README</a></p>

        <p class="view"><a href="results.html">Results</a></p>


        <ul style="text-align: center">
          <li><a href="https://github.com/arianaolson419/SpectrumAnalysis/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/arianaolson419/SpectrumAnalysis/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/arianaolson419/SpectrumAnalysis">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
              <h1>
<a id="music-visualizer" class="anchor" href="#music-visualizer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Implementation</h1>

<p>Our code is broken up into three main parts. The FFT, or Fast Fourier Transform, brings the sound file from a time domain to a frequency domain, allowing it to be analyzed mathematically and exported as a sequence of values corresponding to how many LEDs should be lit up. From there it moves into the visualization program that inputs those values and maps them to individual LEDs for exporting to the hardware. The user is able to control which song is played through the GUI (Graphical User Interface) hosted on the Pi.</p>

<img src="images/uml.png" alt="uml diagram">

<p><strong>AV_FFT:</strong> takes a .wav file, performs FFT analysis on the audio data, and creates a .csv file of frequency data. The user may change the number of frequency buckets and the input song. Optional bar graph representations of the FFT data can also be created. This section of the code was adapted from <a href='https://github.com/n00bsys0p/python-visualiser'>Xander Sheppard's</a> audio visualizer, although instead of creating a bar graph visualizer, the code has been modified and augmented for the needs of this project.</p>

<p><strong>AV_LED:</strong> uses the .csv file to assign colors to LEDs in an array and lights up the LEDs. Although this is configured to display the data on our specific helical structure, with some creativity many other configurations can also be made. The <a href="https://github.com/richardghirst/rpi_ws281x">Rpiws281x</a> library is crucial for the Raspberry Pi to control the LEDs. The default color of the LEDs is white, and branches of the helix change color corresponding to the amplitude of the frequency at each frame. The positions of colored LED pixels  each frame are stored in a numpy array where 0 corresponds to a white pixel and 1 corresponds to a colored pixel. The index of an element in the array corresponds to the index of an LED pixel in the strip. The 7 colors are stored in a list, and the color of a colored pixel is determined by which branch it falls on on the helix. The colors can be easily adjusted, and more can be added easily to the list.</p>

<p><strong>GUI:</strong> page.py utlizes Flask to make a GUI. The GUI consists of a pull down menu where one can select a song from the list of preloaded songs and a big red Start! button. When a song is selected and the button is pressed, the sculpture lights up and the music starts to play. </p>

<img src="images/gui1.png" alt="gui page 1">
<hr>
<img src="images/gui2.png" alt="gui page 2">

<p>To do this, AV_LED and playsong are imported and run when the button is pressed. The file locations of the audio files and the FFT data of each song is stored in a dictionary that can be augmented to include more songs</p>

      </section>
       <footer>
        <p>This project is maintained by <a href="https://github.com/arianaolson419">arianaolson419</a></p>
        <p>Contributors
        <ul class="contributors">
          <li>Ariana Olson</li>
          <li>Harper Owen</li>
          <li>Paige Pfenninger</li>
        </ul>
        Special thanks to Carl Moser and Ian Paul
        </p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    </div>
      </body>
      </html>